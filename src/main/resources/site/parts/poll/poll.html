<div class="p-poll widget">
    <h1 class="widget-title">Poll</h1>
    <div data-th-if="${!poll}">
        <h3>Configure poll</h3>
    </div>

    <div data-th-if="${poll}">

        <div data-th-text="${poll.data.question}"></div>
        <form data-th-action="${action}" method="post" data-th-id="${id}" data-th-attr="data-poll-id=${id}" class="poll-form">
            <div class="error-message"></div>

            <div data-th-each="option : ${options}" data-th-remove="tag">
                <label class="poll-choice">
                    <span class="background" data-th-style="${closed} ? 'width:' + ${option.percent} + '%' : ''"></span>
                    <input type="radio" name="option" data-th-value="${option.value}" class="poll-option" data-th-style="${closed}? 'display:none;' : ''"/>
                    <span class="result">
                        <span class="result-percent" data-th-text="${option.percent} + '%'" data-th-style="${!closed}? 'display:none;' : ''"></span>
                        <span class="result-name" data-th-text="${option.value}"></span>
                    </span>
                </label>
            </div>

            <button type="submit" data-th-if="${!closed}">Vote</button>

            <div>
                <span class="total" data-th-text="${total}"></span>
                <span class="ends" data-th-text="${expires}"></span>
            </div>

        </form>

    </div>
</div>